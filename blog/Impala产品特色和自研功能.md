## 白皮书Impala部分

Impala是基于MPP架构的新型查询系统，它提供比现有SQL-on-Hadoop引擎具有简易使用和快速查询的特点，支持标准的ANSI SQL语法；Impala支持Hive元数据查询存储在多种存储系统上的数据。另外Impala具有较好的可扩展性，可以很好的与典型BI应用系统协同工作，对于即席查询(Ad-hoc查询)需求无疑是首选工具。

### 产品特色

* 快速查询：Impala提供了对全量数据低延迟，高性能的查询能力，数据可以以不同格式存储在HDFS/HBASE/KUDU甚至S3上，查询的快速响应使得用户可以对于查询进行互动探索和微调。相对于Apache Hive，Impala在分析查询的性能有十倍以上的提升，相对比Apache Spark，Impala也有3到6倍的性能提升。
* 一份数据，多套引擎：Impala能够和Hadoop生态圈中的现有工具配合工作，并且Impala能够完全兼容Hive的元数据，这意味着存储在Hadoop中的数据可以同时被不同的查询引擎使用，包括Apache Hive，Apache Spark、Impala等，这种集成能够降低了数据存储的代价，简化了数据开发流程，避免数据拷贝和移动，伴随着数据安全，数据管理等功能的集成，能够非常好的实现一份数据，多套查询引擎。
* 与现有BI工具兼容：用户可以使用多种常用的查询工具与Impala交互，Impala能够完全兼容ANSI SQL语法，这样可以减小由于接入新系统而带来的业务中断，学习Impala的代价对于了解SQL的用户是非常低的。另外，Impala可以无缝集成当前比较流行的商业智能(B1)工具。

### 重要自研部分

* 用户权限隔离：开源版本的Impala只支持impala用户执行所有的数据访问操作，不同用户的操作会造成数据权限不一致，无法被其它查询引擎使用等问题，我们基于开源Impala版本添加支持用户权限隔离，实现用户数据的自治和不同引擎之间的共享。
* 基于Zookeeper高可用和负载均衡：Impala典型的高可用方案是基于Haproxy+Keepalived实现，但是这种方案扩展性一般并且不能够和Hive兼容，我们由此开发了基于Zookeeper的高可用负载均衡方案，以此兼容Hive的使用方式。
* 集中式的查询审计和管理系统：每一个Impalad都可以作为SQL引擎提供服务，导致每一个节点保存了部分的查询详细信息，这样增加了用户的使用难度，由此我们开发了集中式的查询审计和管理系统，支持不同用户查看不同的SQL查询信息。
* 细粒度的权限控制：开源版本的Impala只支持ALL/INSERT/SELECT三种权限，无法做到诸如CREATE/UPDATE/DROP等细粒度的权限，我们对此进行修改以支持细粒度的权限控制，更好的保证了数据安全。
* 元数据同步：Impala和Hive等SQL引擎共享元数据存在无法同步DDL操作的问题，我们基于现有的Impala架构增加了同步DDL操作的功能，实现元数据在不同SQL引擎之间实时的同步。
* 元数据权限集成Ranger：社区版本Impala权限系统只能与Apache Sentry集成，我们针对这个问题实现了与Apache Ranger的集成，实现统一的元数据和数据管理。
* 兼容Apache Hive的客户端：Impala虽然可以直接使用Hive的URL进行连接，但是仍然存在一些参数有所区别，因此对原有客户端进行封装以支持使用与Hive完全一致的URL访问Impala。